<form class="{{cssClass}}" autocomplete="off">

  <!-- HEADER -->
  <header class="sheet-header">
    <img src="{{actor.img}}" data-edit="img" title="{{actor.name}}"/>
    <section class="header-details">
      <h1 class="charname">
        <input name="name" type="text" value="{{actor.name}}"/>
      </h1>
    </section>
  </header>

  <!-- BODY -->
  <section class="sheet-content" style="margin-top: 10px;">
    <div>
      {{#each data.traits.traits.value as |trait idx|}}
      <span style="border: solid 1px black; text-transform: uppercase;">{{localize trait}}</span>
      {{/each}}
    </div>

    <h2>Master</h2>
    <div>
      <label for="{{data._id}}-master"><b>Master Actor</b></label>
      <select id="{{data._id}}-master" name="data.master.id">
        {{#select data.master.id}}
        <option value="">Select a master...</option>
        {{#each masters as |master idx|}}
        <option value="{{master.data._id}}">{{master.name}}</option>
        {{/each}}
        {{/select}}
      </select>
    </div>
    <div><b>Master Level</b> {{data.master.level}}</div>
    <div>
      <label for="{{data._id}}-spellcasting-ability"><b>Master Spellcasting Ability</b></label>
      <select id="{{data._id}}-spellcasting-ability" name="data.master.ability">
        {{#select data.master.ability}}
        {{#each abilities as |ability abbr|}}
        <option value="{{abbr}}">{{ability}}</option>
        {{/each}}
        {{/select}}
      </select>
    </div>

    <h2>Familiar</h2>
    <div>
      <label for="{{data._id}}-species"><b>Creature</b></label>
      <input id="{{data._id}}-species" name="data.details.creature.value" value="{{data.details.creature.value}}" placeholder="Rat, imp, leshy, etc."/>
    </div>
    <div>
      <b>Size</b>
      <span>{{localize (add 'PF2E.ActorSize' data.traits.size.label)}}</span>
    </div>
    <div title="{{data.attributes.perception.breakdown}}" data-perception-check>
      <b>Perception</b>
      <span>{{numberFormat data.attributes.perception.value decimals=0 sign=true}}</span>
    </div>
    <div>
      <b>Senses</b>
      {{#each data.traits.senses as |sense idx|}}
      <span style="border: solid 1px silver;">{{sense.label}}{{#if sense.value}} ({{sense.value}}){{/if}}</span>
      {{/each}}
    </div>

    <h2>Defenses</h2>
    <div>
      <label for="{{data._id}}-hit-points"><b>Hit Points</b></label>
      <input id="{{data._id}}-hit-points" name="data.attributes.hp.value" value="{{data.attributes.hp.value}}"/>
      <span>/</span>
      <span title="{{data.attributes.hp.breakdown}}">{{data.attributes.hp.max}}</span>
    </div>
    <div title="{{data.attributes.ac.breakdown}}">
      <b>Armor Class</b>
      <span>{{numberFormat data.attributes.ac.value decimals=0 sign=false}}</span>
    </div>
    {{#each data.saves}}
    <div title="{{this.breakdown}}" data-saving-throw="{{@key}}">
      <b>{{localize this.name}}</b>
      <span>{{numberFormat this.value decimals=0 sign=true}}</span>
    </div>
    {{/each}}

    <h2>Offenses</h2>
    <div title="{{data.attack.breakdown}}" data-attack-roll>
      <b>Attack Roll</b>
      <span>{{numberFormat data.attack.value decimals=0 sign=true}}</span>
    </div>

    <h2>Skills</h2>
    {{#each data.skills}}
    <div title="{{this.breakdown}}" data-skill-check="{{@key}}">
      <b>{{this.name}}</b>
      <span>{{numberFormat this.value decimals=0 sign=true}}</span>
    </div>
    {{/each}}

    <ol class="item-list">
      <li>
        <h3>{{localize 'PF2E.ConditionsLabel'}}</h3>
      </li>
      {{#each items as |item idx|}}
      {{#if (eq item.type 'condition')}}
      <li class="item expandable" data-item-id="{{item._id}}">
        <div class="item-name" style="display: flex;">
          <div class="item-image" style="background-image: url({{item.img}})">
            <i class="fas fa-comment-alt"></i>
          </div>
          <h4>{{item.name}}</h4>
        </div>
        {{#if ../owner}}
        <div class="item-controls">
          <a class="item-control item-delete" title="{{localize PF2E.DeleteItemTitle}}"><i class="fas fa-trash"></i></a>
        </div>
        {{/if}}
        <div class="item-summary">{{{enrichHTML item.data.description.value}}}</div>
      </li>
      {{/if}}
      {{/each}}
      <li>
        <h3>{{localize 'PF2E.EffectsLabel'}}</h3>
      </li>
      {{#each items as |item idx|}}
      {{#if (eq item.type 'effect')}}
      <li class="item expandable" data-item-id="{{item._id}}">
        <div class="item-name" style="display: flex;">
          <div class="item-image" style="background-image: url({{item.img}})">
            <i class="fas fa-comment-alt"></i>
          </div>
          <h4>{{item.name}}</h4>
        </div>
        {{#if ../owner}}
        <div class="item-controls">
          <a class="item-control item-edit" title="{{localize 'PF2E.EditItemTitle'}}"><i class="fas fa-edit"></i></a>
          <a class="item-control item-delete" title="{{localize PF2E.DeleteItemTitle}}"><i class="fas fa-trash"></i></a>
        </div>
        {{/if}}
        <div class="item-summary">{{{enrichHTML item.data.description.value}}}</div>
      </li>
      {{/if}}
      {{/each}}
    </ol>
  </section>

</form>
